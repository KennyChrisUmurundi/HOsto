{% extends 'account/base.html'%}
{% block content %}

{% for message in messages %}
      <div class="alert {{ message.tags }}  alert-success" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
      </button>
        {{ message }}
        </div>
  {% endfor %}

<div id="content">
  <div class="row no-margin-padding">
    <div class="col-md-6">
      <h3 class="block-title">Room Allotment</h3>
    </div>
    <div class="col-md-6">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="index.html">
            <span class="ti-home"></span>
          </a>
                    </li>
                    <li class="breadcrumb-item">Room Allotment</li>
        <li class="breadcrumb-item active">All Rooms</li>
      </ol>
    </div>
  </div>
  <!-- /Page Title -->

  <!-- /Breadcrumb -->
  <!-- Main Content -->
  <div class="container-fluid">

    <div class="row">
      <!-- Widget Item -->
      <div class="col-md-12">
        <div class="widget-area-2 proclinic-box-shadow">
          <h3 class="widget-title">All Rooms</h3>
          <div class="table-responsive mb-3">
            <table id="tableId" class="table table-bordered table-striped">
                              <thead>

                                <tr>
                                    <th>Room Number</th>
                                    <th>Room Type</th>
                                    <th>Patient Code</th>
                                    <th>Allocation Date</th>
                                    <th>Discharge_date</th>
                                    <th>Status</th>
                                </tr>
                              </thead>
                              <tbody>

                                {% for room in allRooms %}
                              <tr>
                                <td>{{room.number}}</td>
                                <td>{{room.type}}</td>
                                {% if room.allotment.patient %}
                                <td>{{room.allotment.patient}}</td>
                                {% else %}
                                <td>-</td>
                                {% endif %}
                                <td>{{room.allotment.allotment_date}}</td>
                                <td>{{room.allotment.discharge_date}}</td>
                                {% if  room.allotment.allotment_date and not room.allotment.discharge_date %}
                                <td><a href="#"><span class="badge badge-pill badge-info">Allocated</span></a></td>
                                {% elif room.allotment.discharge_date %}
                                <td><a href="#"><span class="badge badge-pill badge-success">Available</span></a></td>
                                {% else %}
                                <td><a href="#"><span class="badge badge-pill badge-danger">Not Allocated</span></a></td>
                                {% endif %}

                              </tr>

                              {% endfor %}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

{% endblock %}
