{% load static %}
{% for message in messages %}
      <div class="alert {{ message.tags }} alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
      </button>
{{ message }}
      </div>
{% endfor %}

<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Hosto</title>

  <link href="{% static 'doctor/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">

  <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="{% static 'doctor/css/style.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.1.0/material.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
  <link href="{% static 'doctor/css/style.css' %}" rel="stylesheet">


</head>

<body >


    <div id="wrapper">
    <ul class="navbar-nav  sidebarColor sidebar sidebar-dark accordion" id="accordionSidebar">
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="#">
        <div class="sidebar-brand-icon ">
          <i class="fas fa-hospital"></i>
        </div>
        <div class="sidebar-brand-text mx-3">Hosto</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Reception -->
{% if user.is_authenticated and user.role.role == 'is_receptionist' %}

      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
          <i class="fas fa-user-md"></i>
          <span>Reception</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <a class="collapse-item" href="{% url 'reception:add-patient' %}">New Patient</a>
            <a class="collapse-item" href="#">Patients list</a>
            <a class="collapse-item" href="{% url 'reception:reception-home' %}">Search</a>
          </div>
        </div>
      </li>

{% endif %}

      <!-- Divider -->
{% if user.is_authenticated and user.role.role == 'is_doctor' %}
        <div class="sidebar-heading">
          Doctor
        </div>
        <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'doctor:ScanCode'%}">
          <i class="fas fa-barcode"></i>
          <span>Scan for Barcode</span>
        </a>



        <li class="nav-item">
        <a class="nav-link collapsed" href="#">
          <i class="fas fa-calendar"></i>
          <span>Appoinments</span>
        </a>



        <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'doctor:doctor-profile'%}">
          <i class="fas fa-user"></i>
          <span>Profile</span>
        </a>


{% endif %}

       <!-- Divider -->
{% if user.is_authenticated and user.role.role == 'is_labTech' %}

       <hr class="sidebar-divider ">

      <!-- Nav Item - Lab-->

      <li class="nav-item">
      <a class="nav-link collapsed" href="{% url 'Laboratory:scanBarcode'%}">
        <i class="fas fa-barcode"></i>
        <span>Scan for Barcode</span>
      </a>



      <li class="nav-item">
      <a class="nav-link collapsed" href="#">
        <i class="fas fa-calendar"></i>
        <span>Appoinments</span>
      </a>



      <li class="nav-item">
      <a class="nav-link collapsed" href="#">
        <i class="fas fa-user"></i>
        <span>Profile</span>
      </a>


{% endif %}

       <!-- Divider -->
{% if user.is_authenticated and user.role.role == 'is_pharmacist'  %}
        <hr class="sidebar-divider ">

      <!--Nav Item - Pharmacy-->

      <li class="nav-item">
      <a class="nav-link collapsed" href="{% url 'pharmacy:scanBarcode'%}">
        <i class="fas fa-barcode"></i>
        <span>Scan for Barcode</span>
      </a>
      </li>

      <li class="nav-item">
      <a class="nav-link collapsed" href="{% url 'pharmacy:add_drugs'%}">
        <i class="fas fa-medkit"></i>
        <span>Add Drugs</span>
      </a>
    </li>

    <li class="nav-item">
    <a class="nav-link collapsed" href="{% url 'pharmacy:drugsList' %}">
      <i class="fas fa-medkit"></i>
      <span>DrugsList</span>
    </a>
  </li>
{% endif %}


        {% if user.is_authenticated and user.role.role == 'is_admin' %}
        <div class="sidebar-heading">
         Settings
        </div>
        <li class="nav-item">
         <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
           <i class="fas fa-user-md"></i>
           <span>Administration</span>
         </a>
         <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
           <div class="bg-white py-2 collapse-inner rounded">
             <a class="collapse-item" href="{% url 'account:user-register' %}">New User</a><!--
             <a class="collapse-item" href="{% url 'reception:reception-home' %}">Search</a>  -->
             <a class="collapse-item" href="{% url 'account:user-changePassword'%}">Change Password</a>
           </div>
         </div>
        </li>

        {% endif %}


        {% if user.is_authenticated %}
        <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'account:user-login' %}">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </a>
        {% endif %}
    </ul>

    <!-- End of Sidebar -->

    <div class="content-wrapper d-flex flex-column" style="width: 100%;margin:20px;">
      <div id="content">
            {% if user.is_authenticated and user.role.is_receptionist  %}
                <!-- Content Header (Page header) -->
                <section class="content-header">

                    <div class="p-l-30 p-r-30">
                        <div class="header-icon"><i class="fas fa-receipt"></i>
                        </div>
                        <div class="header-title">
                            <h1>Reception</h1>
                            <hr id="divider">
                        </div>
                    </div>
                </section>
            {% endif %}










{% block content %}{% endblock %}






              <!--Footer-->
              <div class="footer">
               <footer class="sticky-footer bg-white">
                  <div class="container my-auto">
                    <div class="copyright text-center my-auto"style="color:#577BCE">
                     <span>Copyright &copy; Hosto 2019</span>
                   </div>
                  </div>
               </footer>
              </div>
            </div>
    </div>
  </div>
</div>



      <!--end of Footer-->






    <!-- Bootstrap core JavaScript-->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script>
    $(document).ready(function(){
        $("#cons").click(function(){
        $("#doctor_div").removeAttr('hidden');
        $("#doc_btn").removeAttr('hidden');
        $("#category").removeAttr('disabled');
        $("#lab_div").attr('hidden', 'True');
        $("#lab_btn").attr('hidden', 'True');
      });

      $("#lab").click(function(){
        // $("#doc_btn").attr('hidden', 'True');
        $("#doctor_div").attr('hidden', 'True')
        $("#category").attr('disabled', 'True');
        $("#id_doctor").attr('disabled', 'True');
        $("#lab_div").removeAttr('hidden');
        $("#doc_btn").removeAttr('hidden');
      });

      $("#sel").click(function(){
        $("#doctor_div").attr('hidden', 'True');
      });

      $("#category").change(function(){
        $("#doc_name").removeAttr('hidden', 'True');
        $("#id_doctor").removeAttr('disabled');
      });

      $("#sele").click(function(){
        $("#apptmt").attr('hidden', 'True');
        $("#labo").attr('hidden', 'True');
      });

      $("#consultation").click(function(){
        $("#labo").attr('hidden', 'True');
        $("#apptmt").removeAttr('hidden');
      });

      $("#laboratory").click(function(){
        $("#apptmt").attr('hidden', 'True');
        $("#labo").removeAttr('hidden');
      });
    });

    $('select.test_cat').change(function() {
        var currentVal = $('#id_tests').val();
        $('textarea.textarea').val(currentVal + $(this).val() +' , ');
    });


    $('select.test_cat').change(function(){
        var currentPrice = Number($('#id_totalPrice').val());
        var sum = 0;
        $('select.test_cat :selected').each(function() {
          sum += Number(currentPrice + $(this).data('price'));
        });
        $("#id_totalPrice").val(sum);
    });

function generate(l) {
    if (typeof l==='undefined'){var l=8;}
    /* c : chaîne de caractères alphanumérique */
    var c='abcdefghijknopqrstuvwxyzACDEFGHJKLMNPQRSTUVWXYZ12345679',
    n=c.length,
    /* p : chaîne de caractères spéciaux */
    p='!@#$+-*&_',
    o=p.length,
    r='',
    n=c.length,
    /* s : determine la position du caractère spécial dans le mdp */
    s=Math.floor(Math.random() * (p.length-1));

    for(var i=0; i<l; ++i){
        if(s == i){
            /* on insère à la position donnée un caractère spécial aléatoire */
            r += p.charAt(Math.floor(Math.random() * o));
        }else{
            /* on insère un caractère alphanumérique aléatoire */
            r += c.charAt(Math.floor(Math.random() * n));
        }
    }
    return r;
}

/* exemple de fonction génération de mdp dans un form (utilise JQuery) */
$(document).ready(function() {
    /* on détecte un des champ du formulaire contient une class "gen", on insérera un bouton dans sa div parent qui appelera la fonction generate() */
    if($('form input.gen').length){
        $('form input.gen').each(function(){
            $('<span class="generate" style="cursor: pointer;"><i class="fa fa-fw fa-sync"  style="font-size: 25px; margin-top: 5px; margin-left: 5px;"></i></span>').appendTo($(this).parent());
        });
    }

    /* évènement click sur un element de class "generate" > appelle la fonction generate() */
    $(document).on('click','.generate', function(e){
        e.preventDefault();
        /* ajout du mot de passe + changement du paramètre type de password vers text (pour lisibilité) */
        $(this).parent().children('input').val(generate());
        var currentPass = $(".gen").val()
        $(".pass").val(currentPass);
    });
});

function submitBday() {
    var Q4A = "";
    var Bdate = document.getElementById('id_dob').value;
    var Bday = +new Date(Bdate);
    Q4A += ~~((Date.now() - Bday) / (31557600000));
    var theBday = document.getElementById('id_age');
    //theBday.innerHTML = Q4A;
    $("#id_age").val(Q4A);
}
</script>


</body>


</html>
