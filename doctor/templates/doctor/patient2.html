{% extends 'doctor/base.html' %}
{% load crispy_forms_tags}

{% block content%}


{% if  scanCode %}
  {% for Patient in scanCode%}
          <div class="page-wrapper">
            <div class="content">
                <div class="card-box profile-header">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="profile-view">
                                <div class="profile-img-wrap">
                                    <div class="profile-img">
                                      <img class="avatar" src="{{Patient.image.url}}" alt="">
                                    </div>
                                </div>

                                <div class="profile-basic">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <div class="profile-info-left">
                                                <h3 class="user-name m-t-0 mb-0">{{ Patient.firstname }}&nbsp{{Patient.lastname}}</h3>
                                                <div class="Patient-Id">Patient Id:{{Patient.code}}</div>
                                                <div class="lab-test"><a href="{% url 'doctor:patient-lab' Patient.code %}" class="btn btn-primary">Lab</a></div>
                                                <div class="pharmacy_btn"><a href="{% url 'doctor:patient-pharmacy' Patient.code %}" class="btn btn-primary">Pharmacy</a></div>
                                                <div class="icu_btn"><a href="{% url 'doctor:patient-icu' Patient.code %}" class="btn btn-primary">ICU</a></div>
                                            </div>
                                        </div>
                                        <div class="col-md-7">
                                            <ul class="personal-info">
                                                <li>
                                                    <span class="title">Phone:</span>
                                                    <span class="text"><a href="#">{{Patient.phone}}</a></span>
                                                </li>
                                                <li>
                                                    <span class="title">Email:</span>
                                                    <span class="text"><a href="#">{{Patient.email}}</span></a></span>
                                                </li>
                                                <li>
                                                    <span class="title">Address:</span>
                                                    <span class="text">{{Patient.address}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Gender:</span>
                                                    <span class="text">{{Patient.gender}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Age:</span>
                                                    <span class="text">{{Patient.age}}</span>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

        				<div class="profile-tabs">
        					<ul class="nav nav-tabs nav-tabs-bottom">
                    <li class="nav-item"><a class="nav-link active" href="#appointment" data-toggle="tab">On Going</a></li>
        						<li class="nav-item"><a class="nav-link " href="#about-cont" data-toggle="tab">Medical History</a></li>
        						<li class="nav-item"><a class="nav-link" href="#bottom-tab2" data-toggle="tab">Tests</a></li>
        						<!-- <li class="nav-item"><a class="nav-link" href="#bottom-tab3" data-toggle="tab">Tab</a></li> -->
        					</ul>

                  <div class="tab-content">
        						<div class="tab-pane show active" id="appointment">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card-box">
                                  <div class="table-responsive">
									                    <table id="example" class="table table-striped table-bordered" style="width:100%">
                                        <thead>
                                          <tr>
                                              <th>Appointment</th>
                                              <th>Status</th>


                                          </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>{{onGoing.created_date}}</td>

                                            {% if onGoing.cashappointmentstatus.status == 'Unpaid' %}
                                            <td><span class="badge badge-pill badge-danger">{{ onGoing.cashappointmentstatus.status }}</span></td>
                                            {% elif onGoing.cashappointmentstatus.status == 'Paid' %}
                                            <td><span class="badge badge-pill badge-success">{{ onGoing.cashappointmentstatus.status }}</span></td>
                                            {% endif %}
                                            {% if onGoing.cashappointmentstatus.status == 'Unpaid' %}
                                            <td><span class="badge badge-pill badge-secondary">Add Report</span></td>
                                            {% elif onGoing.cashappointmentstatus.status == 'Paid' %}
                                            <td><a href="{% url 'doctor:reports' onGoing.patient onGoing.id %}"><span class="badge badge-pill badge-info">Add a report</span></a></td>
                                            {% endif %}
                                            <!-- <td><a href="{% url 'doctor:reports' onGoing.patient onGoing.id %}"><span class="badge badge-pill badge-info">Add a report</span></a></td> -->



                                        </tr>
                                   </tbody>
                                    </table>
                                  </div>
                              </div>
                            </div>
                          </div>
                        </div>




        						<div class="tab-pane " id="about-cont">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card-box">
                                  <div class="table-responsive">
									                    <table id="example" class="table table-striped table-bordered" style="width:100%">
                                        <thead>
                                          <tr>
                                              <th>Latest Visit</th>
                                              <th>Doctor visited</th>
                                              <th>Department</th>
                                              <th>Comments</th>


                                          </tr>
                                        </thead>
                                        {% for Appointment in history%}
                                        <tbody>
                                        <tr>
                                            <td>{{Appointment.created_date}}</td>
                                            <td>{{Appointment.doctor}}</td>
                                            <td>Edinburgh</td>
                                            <td>N/A</td>
                                        </tr>

                                        {% endfor %}

                                      </tbody>



                                    </table>
                                    <a href=""data-toggle="modal" data-target="#checkReports"><span style="font-size:17px;"class="badge badge-pill badge-info">Check Reports</a>
                                  </div>
                              </div>
                            </div>
                          </div>
                        </div>




                      <div class="tab-pane" id="bottom-tab2">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card-box">
                                  <div class="table-responsive">

									                    <table id="example" class="table table-striped table-bordered" style="width:100%">
                                        <thead>

                                          <tr>
                                              <th>Tests</th>
                                              <th>Date</th>
                                              <th>Status</th>
                                              <th>Observation</th>

                                          </tr>

                                          {% for Lab in tests %}
                                        </thead>
                                        <tbody></div>
                                        <tr>

                                            <td>{{Lab.tests}}</td>
                                            <td>{{Lab.created_date}}</td>
                                            {% if Lab.teststatus.status == 'Done' %}
                                            <td><span class="badge badge-pill badge-success">Test done</span></td>
                                            {% endif %}
                                            {% if Lab.teststatus.status == 'Not Done' %}
                                            <td><span class="badge badge-pill badge-danger">Test not done</span></td>
                                            {% endif %}

                                            <td>N/A</td>

                                            {% endfor %}
                                        </tr>

                                      </tbody>

                                    </table>
                                    <a href=""data-toggle="modal" data-target="#results"><span style="font-size:17px;"class="badge badge-pill badge-info">Check Results</a>
                                  </div>
                              </div>
                            </div>
                          </div>
          						</div>


                      <div class="modal fade" id="results" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Results</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>

                              <div class="modal-body">
                            			     <ul class="list-group companyPosItemsList">
                                          {% for Lab in tests %}
                            				         <li class="list-group-item" >

                                					              <a href="{% url 'doctor:theResult' Lab.patient Lab.id %}"> <span class="companyPosLabel">{{Lab.tests}}</span></a></br>

                            				          </li>
                                              {% endfor %}
                            			     </ul>

                            		</div>



                            <div class="modal-footer">
                              <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
                            </div>
                            </div>
                          </div>
                        </div>


          						<!-- <div class="tab-pane" id="bottom-tab3">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card-box">
          							Tab content 3
                                </div>
                            </div>
          						</div>
          					</div> -->
          				</div>
                </div>





          <!-- <div class="profile-tabs">
            <ul class="nav nav-tabs nav-tabs-bottom" >
              <li class="nav-item"><a class="nav-link active" href="#about-cont" data-toggle="tab">Report</a></li>
            </ul>
            <form method="POST">
              {% csrf_token %}
              <input type="text" name="patient" value="{{ onGoing.patient }}" readonly="True" hidden>
              <input type="text" name="appointmentId" value="{{ onGoing.id }}" readonly="True" hidden>
              <div class="row" >
                  <div class="col-md-12">
                      <div class="card-box">

                          {% for reports in reports %}

                            {{ add_report }}

                            {% endfor %}

                          </br>
                          <div class="button">
                            <button type="submit" class="btn btn-success mr-2">Save</button>
                          </div>
                        </div>
                        </div>
                      </div>
                  </div>
              </form> -->
              {% endfor %}
              {% endif%}




{% if not scanCode %}
</br></br>
            <div class="alert alert-warning">
              <strong>Warning!!</strong>
              No information,please scan again <a href="{% url 'doctor:ScanCode' %}">here</a>
            </div>
{% endif %}

<div class="modal fade" id="checkReports" tabindex="-1" role="dialog" aria-labelledby="companyPositionLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">

            <h4 class="modal-title" id="companyPositionLabel">Medical History</h4>
          </div>
          <div class="modal-body">
        			     <ul class="list-group companyPosItemsList">
                      {% for Appointment in history %}
        				         <li class="list-group-item" >

            					               <a href="{% url 'doctor:theReport' Appointment.patient Appointment.id %}"><span class="companyPosLabel">{{Appointment}}</span></a></br>

        				          </li>
                          {% endfor %}
        			     </ul>

        		</div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
          </div>
        </div>
      </div>
    </div>


    <!-- <div class="modal fade" id="checkResults" tabindex="-1" role="dialog" aria-labelledby="companyPositionLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">

                <h4 class="modal-title" id="companyPositionLabel">Medical History</h4>
              </div>
              <div class="modal-body">
            			     <ul class="list-group companyPosItemsList">
                          {% for Tests in tests %}
            				         <li class="list-group-item" >

                					               <span class="companyPosLabel">{{tests.findings}}</span></a></br>

            				          </li>
                              {% endfor %}
            			     </ul>

            		</div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
              </div>
            </div>
          </div>
        </div> -->


{% endblock %}
